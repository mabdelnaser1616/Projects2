


from djitellopy import Tello
import time

try:
    # Initialize and connect
    tello = Tello()
    tello.connect()
    print(f"Battery: {tello.get_battery()}%")

    # Takeoff
    tello.takeoff()
    tello.move_up(50)  # rise ~0.5m
    time.sleep(1)

    print("Starting 10-minute autonomous flight...")

    # Track time
    start_time = time.time()
    loop_count = 0

    while time.time() - start_time < 600:  # 600 seconds = 10 minutes
        # Right curve (part of figure-8)
        for _ in range(8):
            tello.move_forward(30)
            tello.rotate_clockwise(22)
            time.sleep(0.2)

        # Left curve (second part of 8)
        for _ in range(8):
            tello.move_forward(30)
            tello.rotate_counter_clockwise(22)
            time.sleep(0.2)

        loop_count += 1
        print(f"Loops completed: {loop_count}")

    # Land after 10 minutes
    tello.land()
    print("Flight complete. Drone landed safely.")

except Exception as e:
    print(f"Error occurred: {e}")
    try:
        tello.land()
    except:
        print("Could not land drone safely.")
